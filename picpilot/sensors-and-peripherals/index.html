<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="University of Waterloo Aerial Robotics Group">
        <link rel="canonical" href="http://www.docs.uwarg.com/picpilot/sensors-and-peripherals/">
        <link rel="shortcut icon" href="../../../../favicon.ico">
        

	<title>Sensors and Peripherals - WARG Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">WARG Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Groundstation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../groundstation/">Table of Contents</a>
</li>

                        
                            
<li >
    <a href="../../groundstation/introduction/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../groundstation/what-you-need-to-know/">What you need to know</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">PicPilot <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Table of Contents</a>
</li>

                        
                            
<li >
    <a href="../introduction/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../pid-loops/">PID Loops</a>
</li>

                        
                            
<li >
    <a href="../pwm-io/">PWM and IO</a>
</li>

                        
                            
<li >
    <a href="../uart/">UART</a>
</li>

                        
                            
<li >
    <a href="../spi/">SPI</a>
</li>

                        
                            
<li >
    <a href="../direct-memory-access/">Direct Memory Access</a>
</li>

                        
                            
<li >
    <a href="../i2c/">I2C</a>
</li>

                        
                            
<li >
    <a href="../datalink/">Datalink</a>
</li>

                        
                            
<li >
    <a href="../analog-to-digital-converter/">Analog to Digital Converter</a>
</li>

                        
                            
<li class="active">
    <a href="./">Sensors and Peripherals</a>
</li>

                        
                            
<li >
    <a href="../attitude-control/">Attitude Control</a>
</li>

                        
                            
<li >
    <a href="../path-management/">Path Management</a>
</li>

                        
                            
<li >
    <a href="../resources/">Resources</a>
</li>

                        
                            
<li >
    <a href="../faq/">FAQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../computervision/">Computer Vision</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bootcamps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../bootcamp/mechanical/">Mechanical</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../tutorials/git/">Git and Github</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../analog-to-digital-converter/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../attitude-control/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/UWARG/WARG-Docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#sensors-and-peripherals">Sensors and Peripherals</a></li>
        
            <li><a href="#gps-mediatek-3329">GPS (MEDIATEK-3329)</a></li>
        
            <li><a href="#imu-vn-100vectornav-100">IMU (VN-100/VectorNav-100)</a></li>
        
            <li><a href="#altimeter-mpl3115a2">Altimeter (MPL3115A2)</a></li>
        
            <li><a href="#wireless-link-xbee-pro-s3b">Wireless Link - XBEE PRO S3B</a></li>
        
            <li><a href="#rc-receiver-ezuhf">RC Receiver (EzUHF)</a></li>
        
            <li><a href="#airspeed-sensor-wip">Airspeed Sensor (WIP)</a></li>
        
            <li><a href="#ultrasonic-sensor-wip">Ultrasonic Sensor (WIP)</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="sensors-and-peripherals">Sensors and Peripherals</h1>
<p>There are multiple devices and peripherals currently in use on the PICpilot, however, the purpose of this document is not to document their functionality. Instead, appropriate references are listed below.</p>
<h2 id="gps-mediatek-3329">GPS (MEDIATEK-3329)</h2>
<p>This GPS module outputs data in the form of NMEA strings. These are ASCI strings with GPS relevant data embedded in them. A separate program is used to convert these strings to a useable format. The PICpilot expects the data to be in the form of a structure:</p>
<pre><code>typedef struct _GPSData {

    long double latitude;  //8 Bytes

    long double longitude; //8 Bytes

    float time;     //4 Bytes

    float speed;

    int altitude;

    int heading;

    char satellites;    //1 Byte

    char positionFix;

} GPSData;
</code></pre>
<p><em>Latitude</em> and <em>Longitude</em> should be in degrees.</p>
<p><em>Time</em> should be in 24 hour time, with the decimal portion indicating milliseconds.</p>
<p><em>Speed</em> should be in m/s.</p>
<p><em>Altitude</em> should be in m.</p>
<p><em>Heading</em> should be in degrees (geographical heading, not magnetic).</p>
<p><em>Satellites</em> is the number of connected satellites.</p>
<p><em>PositionFix</em> is a number representing the accuracy of the data (0 = no data, 1 = GPS functional, 2 = DGPS functional)</p>
<p>In the current PICpilot, GPS updates occur 10 times a second.</p>
<p>The data sheets can be retrieved from here:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JQXVOR093anI0YXc/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JQXVOR093anI0YXc/view?usp=sharing</a></p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JR2xTV3dCcGJWczQ/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JR2xTV3dCcGJWczQ/view?usp=sharing</a></p>
<h2 id="imu-vn-100vectornav-100">IMU (VN-100/VectorNav-100)</h2>
<p>The VectorNav-100 has a Kalman filter implemented within it. All the registers and commands that can be executed on the oldest VectorNav are available in four files within the PICpilot code. This includes the VN100.c/.h files, the VN_user.c/.h files, the VN_lib.c/.h, and the VN_math.c/.h files.</p>
<p>I GET IT that was 8 files, not four....moving on...</p>
<p>You will find the SPI initialization function in the VN100.c file. It initializes the SPI2 interface.</p>
<p>In the PICpilot, the two most commonly called functions are <em>VN100_SPI_GetYPR()</em> and <em>VN100_SPI_GetRates()</em>. These two functions get the rate and angles of rotation along the yaw, pitch, and roll axis of the vehicle.</p>
<p>For a complete list of functions and settings take a look at the documentation:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JYXlSdW85NnlxYkE/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JYXlSdW85NnlxYkE/view?usp=sharing</a></p>
<h2 id="altimeter-mpl3115a2">Altimeter (MPL3115A2)</h2>
<p>The complete functionality of the altimeter can be found in the MPL3115A2.c/.h files.</p>
<p>There are only 3 functions implemented in the code. An initialization, calibration, and sensor read function.</p>
<p>To see the complete list of functions provided by the altimeter, as well as further details see the documentation here:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JeUE4Y3BhQzVMdkk/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JeUE4Y3BhQzVMdkk/view?usp=sharing</a></p>
<h2 id="wireless-link-xbee-pro-s3b">Wireless Link - XBEE PRO S3B</h2>
<p>The XBEE PRO S3B is currently the wireless interface used with the PICpilot. Nonetheless, many wireless links can be easily substituted with minimal coding as long as a UART interface is supported.</p>
<p>The PICpilot currently only supports this model currently. This wireless link uses the 900MHz spectrum for communication between devices.</p>
<p>According to the packet structure specification in the datasheet below, the data is sent or received in that manner.</p>
<p>For details on other functions and feature that are part of the XBEE PRO S3B module download the documentation here:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JNzdLWXdCWHlEcGs/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JNzdLWXdCWHlEcGs/view?usp=sharing</a></p>
<p>The above link also includes details on the packet structure. See page 62 for the Tx packet structure. See page 70 for the Rx packet structure.</p>
<p>The configuration options for the base station can be found here:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4JTXZESmFEMG9uZEk/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4JTXZESmFEMG9uZEk/view?usp=sharing</a></p>
<p>The configuration options for the aircraft module can be found here:</p>
<p><a href="https://drive.google.com/file/d/0BySpWXvmBM4Jdml6Wlg5UFZKWEE/view?usp=sharing">https://drive.google.com/file/d/0BySpWXvmBM4Jdml6Wlg5UFZKWEE/view?usp=sharing</a></p>
<h2 id="rc-receiver-ezuhf">RC Receiver (EzUHF)</h2>
<p>The exact model of the RC Receiver is insignificant to the functionality of the PICpilot. However, the PICpilot has 8 PWM inputs and 8 PWM outputs. Therefore, it would be prudent to have a RC Receiver capable of managing 8 channels.</p>
<p>The current receiver uses the 431-437MHz spectrum.</p>
<p>The documentation can be found here:</p>
<p><a href="http://www.immersionrc.com/downloads/manuals/EzUHFManual_EN_v1.0.pdf">http://www.immersionrc.com/downloads/manuals/EzUHFManual_EN_v1.0.pdf</a></p>
<h2 id="airspeed-sensor-wip">Airspeed Sensor (WIP)</h2>
<p>This has not been implemented yet.</p>
<h2 id="ultrasonic-sensor-wip">Ultrasonic Sensor (WIP)</h2>
<p>This has not been implemented yet.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright <a href="http://www.uwarg.com"> University of Waterloo Aerial Robotics Group</a></p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
