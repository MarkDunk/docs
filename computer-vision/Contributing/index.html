<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="University of Waterloo Aerial Robotics Group">
        <link rel="canonical" href="http://www.docs.uwarg.com/computer-vision/Contributing/">
        <link rel="shortcut icon" href="../../favicon.ico">
        

	<title>Contributing - WARG Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">WARG Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Groundstation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../groundstation/">Table of Contents</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/introduction/">Introduction</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/what-you-need-to-know/">What you need to know</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/installation/">Installation</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/tutorial/">Tutorial</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/project-structure/">Project Structure</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/contributing/">Contributing</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/documenting/">Documenting</a>
</li>

                    
                        
<li >
    <a href="../../groundstation/resources/">Additional Resources</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">PicPilot <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../picpilot/">Table of Contents</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/introduction/">Introduction</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/pid-loops/">PID Loops</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/pwm-io/">PWM and IO</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/uart/">UART</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/spi/">SPI</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/direct-memory-access/">Direct Memory Access</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/i2c/">I2C</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/datalink/">Datalink</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/analog-to-digital-converter/">Analog to Digital Converter</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/sensors-and-peripherals/">Sensors and Peripherals</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/attitude-control/">Attitude Control</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/path-management/">Path Management</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/resources/">Resources</a>
</li>

                    
                        
<li >
    <a href="../../picpilot/faq/">FAQ</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Computer Vision <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../">Table of Contents</a>
</li>

                    
                        
<li >
    <a href="../Building-the-project-[Linux]/">Building the project [Linux]</a>
</li>

                    
                        
<li >
    <a href="../Building-the-project-[Windows]/">Building the project [Windows]</a>
</li>

                    
                        
<li >
    <a href="../Coding-Conventions/">Coding Conventions</a>
</li>

                    
                        
<li class="active">
    <a href="./">Contributing</a>
</li>

                    
                        
<li >
    <a href="../Using-the-WARG-server-environment/">Using the WARG computer environment</a>
</li>

                    
                        
<li >
    <a href="../Writing-Tests/">Writing Tests</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bootcamps <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../bootcamp/mechanical/">Mechanical</a>
</li>

                    
                        
<li >
    <a href="../../bootcamp/computer-vision/">Computer Vision</a>
</li>

                    
                        
<li >
    <a href="../../bootcamp/electrical/">Electrical</a>
</li>

                    
                        
<li >
    <a href="../../bootcamp/rccompetition/">RC Car Competition</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../tutorials/git/">Git and Github</a>
</li>

                    
                        
<li >
    <a href="../../tutorials/shell/">Using the terminal</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../Coding-Conventions/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../Using-the-WARG-server-environment/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/UWARG/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#contributing">Contributing</a></li>
        
            <li><a href="#adding-a-new-class">Adding a New Class</a></li>
        
            <li><a href="#contributing-to-master-repository">Contributing to Master Repository</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="contributing">Contributing</h1>
<p><a name='new_class'/></p>
<h2 id="adding-a-new-class">Adding a New Class</h2>
<p>The project is divided into modules. Any class that is specific to a certain module should be stored in that module's directory. Classes that need to be accessed by multiple modules should go in Core.</p>
<p>The class should be declared in a header file of the same name as the class and placed in the appropriate module's include directory.</p>
<p>For example: Suppose we are creating class Foo in module Core</p>
<p>(See <a href="https://github.com/UWARG/computer-vision/wiki/Coding-Conventions/_edit">Coding Conventions</a> for details on formatting)</p>
<p>File: modules/core/include/foo.h</p>
<pre><code class="c++">/**
 * @file foo.h
 * @author WARG
 *
 * @section LICENSE
 *
 *  Copyright (c) 2015, Waterloo Aerial Robotics Group (WARG)
 *  All rights reserved.
 *
 *  This software is licensed under a modified version of the BSD 3 clause license
 *  that should have been included with this software in a file called COPYING.txt
 *  Otherwise it is available at:
 *  https://raw.githubusercontent.com/UWARG/computer-vision/master/COPYING.txt
 */

#ifndef FOO_H_INCLUDED
#define FOO_H_INCLUDED

#include &quot;bar.h&quot;

/**
 * @class Foo
 *
 * Foo description goes here
 *
 * @brief optional briefer description goes here
 */

class Foo : public Bar {
public:

    /**
     * Constructor for foo
     *
     * @param baz description of param baz immediately follows variable name
     */
    Foo(int baz);

    /**
     * Getter for baz
     *
     * @returns description of value returned
     */
    int get_baz();

private:
    /**
     * Description of baz
     */
     int baz;

};

#endif // FOO_H_INCLUDED
</code></pre>

<p>The corresponding source file which contains the definitions for the class Foo is placed in the src folder</p>
<p>File: modules/core/src/foo.cpp</p>
<pre><code class="c++">/**
 * @file foo.cpp
 * @author WARG
 *
 * @section LICENSE
 *
 *  Copyright (c) 2015, Waterloo Aerial Robotics Group (WARG)
 *  All rights reserved.
 *
 *  This software is licensed under a modified version of the BSD 3 clause license
 *  that should have been included with this software in a file called COPYING.txt
 *  Otherwise it is available at:
 *  https://raw.githubusercontent.com/UWARG/computer-vision/master/COPYING.txt
 */

#include &quot;bar.h&quot;
#include &quot;foo.h&quot;

Foo::Foo(int baz) : baz(baz) { }

int Foo::get_baz() {
    // note that while documentation is not needed in source files
    //     comments are greatly appreciated
    return baz;
}

</code></pre>

<p>However we're not done yet. While header files when placed in the proper directory are immediately ready for use, source files must be added to the module's CMakeLists.txt file to be compiled into the module.</p>
<p>File: modules/core/CMakeLists.txt</p>
<pre><code class="cmake">include_directories(include)
add_library(Core src/foo.cpp src/frame.cpp src/pixel_target.cpp src/target.cpp)
</code></pre>

<p>Your source file should be added to the arguments of the add_library function (ideally in retaining alphabetical order for readability)</p>
<h4 id="but-what-if-bar-is-part-of-an-external-library">But what if bar is part of an external library?</h4>
<p>If you've forgotten what bar is already notice that it is an external class included in foo.h</p>
<p>The first question to answer is whether or not the use of bar can be avoided. In particular it may provide functionality that is already available in one of the project's current dependencies. Unless it provides substantially improved functionality over what is already available it probably shouldn't be added to the project.</p>
<p>If you determine that bar is a necessary dependency, then it needs to be added to CMakeLists.txt as well. As long as it is only being used in one module, it can be defined in that module's CMakeLists.txt rather than the global CMakeLists.txt.</p>
<p>For simplicity we will assume bar.h is part of the package Bar</p>
<p>File: modules/core/CMakeLists.txt</p>
<pre><code class="cmake">include_directories(include)
find_package(Bar)
if(Bar_FOUND)
    include_directories(${Bar_INCLUDE_DIRS})
    add_library(Core ${Bar_LIBRARIES} src/foo.cpp src/frame.cpp src/pixel_target.cpp src/target.cpp)
endif()
</code></pre>

<p>You may want to research the library you've added online since many external libraries have additional configuration that needs to be added to the CMakeLists or unusual naming conventions for the package.</p>
<p>And we're done.
Now if you re-run cmake and re-build Foo should be built into the project.</p>
<p><a name='contributing_to_master'/></p>
<h2 id="contributing-to-master-repository">Contributing to Master Repository</h2>
<p>To get your code added to master you will, if you haven't done so already, need to fork the project. This can be done by going to the computer-vision page on GitHub and clicking the fork button in the top right.</p>
<p>You then need to make your local code point your fork rather than master.</p>
<pre><code class="bash">git remote set-url origin $FORK_URL
</code></pre>

<p>Where $FORK_URL is the clone link for your fork</p>
<p>You will also want to set a new remote, called upstream, to reference the master repository so that you can pull changes.</p>
<pre><code class="bash">git remote add upstream git@github.com:UWARG/computer-vision.git
</code></pre>

<p>or for https</p>
<pre><code class="bash">git remote add upstream https://github.com/UWARG/computer-vision.git
</code></pre>

<p>this allows upstream changes to be fetched with <code>git fetch upstream</code> and merged into the current branch with <code>git merge upstream/branch_name</code></p>
<p>Now, you can commit your code and push to the fork with</p>
<pre><code class="bash">git add modules/core/src/foo.cpp modules/core/include/foo.h modules/core/CMakeLists.txt
git commit -m &quot;Added class Foo&quot;
git push origin
</code></pre>

<p>Note that it is recommended to add files individually rather than adding all at once with <code>git add -A .</code></p>
<p>That way you ensure you only commit the files you intend to add.
You can also see a list of all unstaged changes (changes that have yet to be added) using <code>git diff</code></p>
<p>Once the code is pushed, go to Github to your fork's page and create a pull request by either going into the pull request menu and choosing "New Pull Request", or, if you have pushed code recently, a pop-up will appear on the main page prompting you to create a pull request.</p>
<p>From the pull request page you can add comments to the pull request noting what you have changed, you can review the changed you have made to make sure you haven't included anything unnecessary and then you can submit the request.</p>
<p>Please note that pull requests will be rejected if they contain extraneous changes.
You can avoid a lot of issues by configuring git to ignore point out whitespace issues in diffs and to fix when patching with:</p>
<pre><code class="bash">git config core.whitespace trailing-space,space-before-tab
git config apply.whitespace fix
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
                <center>Copyright <a href="http://www.uwarg.com"> University of Waterloo Aerial Robotics Group</a></center>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>